---
### Card Media Player ###
card_media_player:
  template:
    - "icon_info_bg"
    - "ulm_language_variables"
  icon: |
    [[[
      var icon = "mdi:speaker";
      if(entity.attributes.app_name){
        var app = entity.attributes.app_name.toLowerCase();
        if(app == "spotify"){
          var icon = "mdi:spotify";
        } else if(app == "google podcasts"){
          var icon = "mdi:google-podcast";
        } else if(app == "plex"){
          var icon = "mdi:plex";
        } else if(app == "soundcloud"){
          var icon = "mdi:soundcloud";
        } else if(app == "youtube music"){
          var icon = "mdi:youtube";
        } else if (app == "oto music"){
          var icon = "mdi:music-circle";
        }
      } else if (entity.attributes.icon){
        var icon = entity.attributes.icon;
      }
      return icon;
    ]]]
  label: |
    [[[
        let state = entity.state;
        return variables["ulm_" + state] ? variables["ulm_" + state] : state;
    ]]]
  state:
    - operator: "template"
      value: "[[[ return entity.state != 'off' ]]]"
      name: |
        [[[
          let name = states[entity.entity_id].attributes.friendly_name;
          if(states[entity.entity_id].attributes.media_title){
              name = states[entity.entity_id].attributes.media_title;
          }
          return name;
        ]]]
      label: |
        [[[
          let label = variables.ulm_on;
          if(states[entity.entity_id].attributes.media_album_name){
              label = states[entity.entity_id].attributes.media_album_name;
          } else if (states[entity.entity_id].attributes.media_artist) {
              label = states[entity.entity_id].attributes.media_artist
          } else {
              label = variables.ulm_on;
          }
          return label;
        ]]]
